<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</title>
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
theme: {
screens: {
'xs': '375px',
'sm': '640px',
'md': '768px',
'lg': '1024px',
'xl': '1280px',
}
}
};
</script>
<style id="mainStyle">
/* Ø¥Ø¶Ø§ÙØ© Ø®Ø· Tajawal Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© */
@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap');
:root {
  --primary-color: #5bbfc6;
  --primary-color-rgb: 91, 191, 198;
  --secondary-color: #aee9f2;
  --accent-color: #eafafd;
  --card-background: #ffffff;
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --border-color: #e5e7eb;
  --shadow-color: rgba(0, 0, 0, 0.08);
  --shadow-hover: rgba(0, 0, 0, 0.15);
  --rating-active: #5bbfc6;
  --rating-inactive: #d1d5db;
}
/* ==================== CATEGORY CARDS GRID ==================== */
.categories-section {
padding: 2rem 0;
background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
}
.category-grid {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 1.5rem;
margin: 0 auto;
max-width: 1200px;
padding: 0 1.5rem;
}
.category-card {
  background: linear-gradient(
    145deg,
    #0f2027 0%,
    #16222a 50%,
    #1b2a32 100%
  );
  border: 1px solid rgba(91, 191, 198, 0.25);
  border-radius: 1.5rem;
  box-shadow:
    0 10px 40px rgba(0, 0, 0, 0.6),
    0 4px 20px rgba(91, 191, 198, 0.15);
  transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  cursor: pointer;
  overflow: hidden;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;

  padding: 0;
  position: relative;
  height: 280px;

  animation: fadeInUp 0.6s ease-out both;
}
.category-card:hover, .category-card.active {
border-color: var(--primary-color);
box-shadow: 0 20px 60px rgba(91, 191, 198, 0.25), 0 8px 30px rgba(0, 0, 0, 0.1);
transform: translateY(-12px) scale(1.02);
}
.category-image-wrapper {
width: 100%;
height: 200px;
border-radius: 1.5rem 1.5rem 0 0;
overflow: hidden;
position: relative;
background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
display: flex;
align-items: center;
justify-content: center;
}
.category-image-wrapper img {
width: 100%;
height: 100%;
object-fit: cover;
transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
}
.category-card:hover .category-image-wrapper img {
transform: scale(1.08);
filter: brightness(1.05) saturate(1.1);
}
.category-info {
  position: relative;
  min-height: 60px;
  width: 100%;
  padding: 0.8rem 0.6rem;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  background: linear-gradient(
    145deg,
    #0f2027 0%,
    #16222a 60%,
    #1b2a32 100%
  );

  border-top: 1px solid rgba(91, 191, 198, 0.25);
}
.category-name {
    font-weight: 700;
    font-size: 1rem;
    color: lightgoldenrodyellow;
    text-align: center;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-shadow: 0 1px 2px rgba(91, 191, 198, 0.1);
}.category-badge {
position: absolute;
top: 12px;
right: 12px;
background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
color: #fff;
padding: 0.4rem 0.8rem;
border-radius: 9999px;
font-size: 0.8rem;
font-weight: 700;
min-width: 2rem;
text-align: center;
box-shadow: 0 6px 20px rgba(91, 191, 198, 0.3);
border: 2px solid rgba(255, 255, 255, 0.3);
z-index: 2;
animation: badge-pop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.category-icon {
font-size: 3rem;
color: var(--primary-color);
filter: drop-shadow(0 4px 12px rgba(91, 191, 198, 0.3));
display: flex;
align-items: center;
justify-content: center;
width: 100%;
height: 100%;
transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
}
.badge-featured {
position: absolute;
top: 12px;
right: 12px;
background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
color: #fff;
font-size: 0.75rem;
font-weight: 700;
padding: 0.3rem 0.8rem;
border-radius: 9999px;
box-shadow: 0 6px 20px rgba(91, 191, 198, 0.3);
z-index: 10;
border: 2px solid rgba(255, 255, 255, 0.3);
animation: badge-pop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}
/* ==================== PRODUCT CARDS ==================== */
.product-card {
background: var(--card-background);
border-radius: 1rem;
box-shadow: 0 4px 20px var(--shadow-color);
transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
overflow: hidden;
display: flex;
flex-direction: row;
border: 1px solid var(--border-color);
position: relative;
animation: fadeInUp 0.6s ease-out both;
}
.product-card:hover {
transform: translateY(-8px);
box-shadow: 0 12px 40px var(--shadow-hover);
border-color: var(--primary-color);
}
.product-image {
position: relative;
width: 40%;
min-height: 160px;
overflow: hidden;
background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
display: flex;
align-items: center;
justify-content: center;
}
.product-image img {
width: 100%;
height: 100%;
object-fit: cover;
transition: transform 0.3s ease;
}
.product-card:hover .product-image img {
transform: scale(1.05);
}
.fallback-thumb {
display: flex;
align-items: center;
justify-content: center;
width: 100%;
height: 100%;
background: linear-gradient(135deg, rgba(var(--primary-color-rgb), 0.15), rgba(var(--primary-color-rgb), 0.05));
font-size: 2.5rem;
color: var(--secondary-color);
}
.product-content {
display: flex;
flex-direction: column;
justify-content: space-between;
padding: 1.25rem;
flex: 1;
color: var(--text-primary);
}
.product-header {
margin-bottom: 0.5rem;
}
.product-name {
font-size: 1rem;
font-weight: 700;
color: var(--text-primary);
margin-bottom: 0.25rem;
line-height: 1.3;
}
.product-name-en {
font-size: 0.8rem;
color: var(--text-secondary);
font-weight: 500;
margin-bottom: 0.5rem;
}
.product-description {
font-size: 0.8rem;
color: var(--text-secondary);
line-height: 1.4;
margin-bottom: 0.75rem;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}
.product-footer {
display: flex;
justify-content: space-between;
align-items: center;
}
.price-chip {
background: linear-gradient(135deg, rgba(var(--primary-color-rgb), 0.1) 0%, rgba(var(--primary-color-rgb), 0.05) 100%);
color: var(--primary-color);
border-radius: 9999px;
padding: 0.4rem 0.9rem;
font-weight: 700;
font-size: 0.95rem;
box-shadow: inset 0 0 0 1px var(--primary-color), 0 2px 8px rgba(91, 191, 198, 0.15);
white-space: nowrap;
border: 1px solid rgba(var(--primary-color-rgb), 0.2);
}
/* ==================== ANIMATIONS ==================== */
@keyframes fadeInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}
@keyframes badge-pop {
0% {
transform: scale(0.8);
opacity: 0;
}
50% {
transform: scale(1.1);
}
100% {
transform: scale(1);
opacity: 1;
}
}
/* ==================== RESPONSIVE ==================== */
@media (max-width: 640px) {
  .restaurantLogo{
    width: 100px;
    height: 100px;
    border-radius: 50%;
  }
.category-grid {
grid-template-columns: repeat(2, 1fr);
gap: 0.5rem;
padding: 0.5rem;
}
.category-card {
height: 320px;
}
.category-image-wrapper {
height: 250px;
}
.category-name {
  font-size: 1.0rem;
        font-weight: bold;
}
.product-card {
flex-direction: row-reverse;
}
.product-image {
        width: 38% !important;
        height: 200px !important;
}
.product-content {
padding: 1rem;
}
.product-name {
font-size: 0.95rem;
}
.product-description {
font-size: 0.75rem;
margin-bottom: 0.5rem;
}
.price-chip {
font-size: 0.85rem;
padding: 0.25rem 0.7rem;
}
}
@media (min-width: 641px) and (max-width: 1024px) {
.category-grid {
grid-template-columns: repeat(2, 1fr);
gap: 1rem;
padding: 1.25rem;
}
}

/* Floating Mascot */
.floating-mascot {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 100px;
    height: auto;
    z-index: 100;
    animation: float 6s ease-in-out infinite;
    transition: transform 0.3s ease;
}

.floating-mascot:hover {
    transform: scale(1.1);
}

@keyframes float {
    0% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-15px);
    }
    100% {
        transform: translateY(0px);
    }
}

@media (max-width: 768px) {
    .floating-mascot {
        display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    }
}

/* Review FAB New Design */
#reviewFabContainer {
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
}
#reviewFabContainer .fab-text {
    white-space: nowrap;
}

#reviewFab {
    animation: shake 2.5s cubic-bezier(.36,.07,.19,.97) infinite;
}

@keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0) scale(1.1); }
    20%, 80% { transform: translate3d(2px, 0, 0) scale(1.1); }
    30%, 50%, 70% { transform: translate3d(-3px, 0, 0) scale(1.1); }
    40%, 60% { transform: translate3d(3px, 0, 0) scale(1.1); }
}

/* Swiper Carousel */
.ad-swiper {
    width: 100%;
    height: 250px; /* Adjust height as needed */
}
.swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.swiper-pagination-bullet-active {
    background-color: var(--primary-color) !important;
}
.swiper-button-next, .swiper-button-prev {
    color: var(--primary-color) !important;
}

/* Review Modals */
.review-modal-content {
    animation: slideUp 0.3s ease-out;
}
@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.star-rating input { display: none; }
.star-rating label {
    font-size: 2rem;
    color: #d1d5db;
    cursor: pointer;
    transition: color 0.2s;
}
.star-rating input:checked ~ label,
.star-rating label:hover,
.star-rating label:hover ~ label {
    color: var(--rating-active, #f59e0b);
}

</style>
<style>
/* 3D Background Effects */
body {
  background: linear-gradient(135deg, #0f2027 0%, #16222a 50%, #1b2a32 100%);
  position: relative;
  overflow-x: hidden;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(255, 219, 98, 0.2) 0%, transparent 50%);
    animation: float3D 20s ease-in-out infinite;
    pointer-events: none;
    z-index: -1;
}

body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%),
        linear-gradient(-45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
    animation: slide3D 15s linear infinite;
    pointer-events: none;
    z-index: -1;
}

@keyframes float3D {
    0%, 100% {
        transform: translate(0, 0) rotate(0deg) scale(1);
    }
    33% {
        transform: translate(30px, -30px) rotate(120deg) scale(1.1);
    }
    66% {
        transform: translate(-20px, 20px) rotate(240deg) scale(0.9);
    }
}

@keyframes slide3D {
    0% {
        transform: translateX(-100%) translateY(-100%);
    }
    100% {
        transform: translateX(100%) translateY(100%);
    }
}

/* 3D Cards Effect */
.menu-card, .category-card, .product-card {
    transform-style: preserve-3d;
    transition: transform 0.6s;
}

.menu-card:hover, .category-card:hover, .product-card:hover {
    transform: perspective(1000px) rotateY(10deg) rotateX(5deg) translateZ(20px);
}

/* Floating elements */
.floating {
    animation: floating3D 6s ease-in-out infinite;
}

@keyframes floating3D {
    0%, 100% {
        transform: translateY(0px) rotateX(0deg) rotateY(0deg);
    }
    50% {
        transform: translateY(-20px) rotateX(5deg) rotateY(5deg);
    }
}
</style>
</head>
<body class="min-h-screen">
<!-- 3D Floating Elements -->
<div class="fixed top-10 left-10 w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full opacity-20 floating blur-xl"></div>
<div class="fixed top-20 right-20 w-32 h-32 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full opacity-10 floating blur-2xl" style="animation-delay: 2s;"></div>
<div class="fixed bottom-20 left-20 w-24 h-24 bg-gradient-to-br from-amber-400 to-orange-400 rounded-full opacity-15 floating blur-xl" style="animation-delay: 4s;"></div>
<div class="fixed bottom-10 right-10 w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-400 rounded-full opacity-20 floating blur-lg" style="animation-delay: 1s;"></div>
<!-- Loading Screen -->
<!-- Floating Action Button for Reviews -->
<div id="reviewFabContainer" class="fixed top-5 flex items-center gap-2 z-[9999] cursor-pointer"
  style="left: 0; flex-direction: column-reverse;" onclick="openReviewModal()">
    <button id="reviewFab" class="text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all transform hover:scale-110">
        <svg style="    width: 2.75rem;     height: 2.75rem;" class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
    </button>
    <span class="fab-text bg-white text-gray-800 text-sm font-semibold px-3 py-1 rounded-full shadow-md">ÙƒÙŠÙ ÙƒØ§Ù†Øª ØªØ¬Ø±Ø¨ØªÙƒØŸ</span>
</div>

<div id="loadingScreen" class="loading-screen">
<div class="text-center text-white">
<div class="animate-spin rounded-full h-16 w-16 border-4 border-white border-t-transparent mx-auto mb-4"></div>
<p class="text-xl font-semibold">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©...</p>
</div>
</div>

<!-- Header -->
<header id="menuHeader" class="sticky top-0 z-40 shadow-md">
<div id="headerAccent"></div>
<div class="container mx-auto px-4 py-3" style="perspective: 1000px;">
<div class="flex flex-col items-center text-center gap-2 mb-3 floating">
<!-- Logo -->
<div id="logoWrapper" class="flex-shrink-0 menu-card">
<img id="restaurantLogo" src="" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…" class="restaurantLogo">
</div>

<!-- Ad Banner Carousel -->
<div id="adBannerContainer" class="w-full max-w-4xl mx-auto my-4 rounded-lg overflow-hidden shadow-lg" style="display: none;">
    <div class="swiper-container ad-swiper">
        <div class="swiper-wrapper" id="adBannerWrapper">
            <!-- Slides will be injected here -->
        </div>
        <div class="swiper-pagination" style="top: 70%;"></div>
    </div>
</div>

<!-- Restaurant Name -->
<div class="text-center">
<h1 id="restaurantName" class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-black" style="color: var(--primary-color);">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</h1>
<p id="restaurantTagline" class="text-xs sm:text-sm text-gray-500 mt-1 font-medium"></p>
<!-- Social Media Links -->
<div id="socialLinksContainer" class="flex justify-center gap-4 mt-4 items-center">
    <!-- Social links will be injected here by JS -->
</div>
</div>
</div>
</div>
<!-- Categories Grid -->
<div class="mt-2 md:mt-4 pb-6" style="perspective: 1000px;">
<div id="categoriesContainer" class="category-grid"></div>
</div>
</header>

<!-- Products View - Hidden by default -->
<main id="productsView" class="hidden">
<!-- Back Button and Category Title -->
<div class="sticky top-0 z-30 bg-white shadow-sm">
<div class="max-w-7xl mx-auto px-3 md:px-6 py-3 flex items-center justify-between">
<button onclick="backToCategories()" class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors font-medium text-gray-700 text-sm">
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
</svg>
Ø±Ø¬ÙˆØ¹
</button>
<h2 id="selectedCategoryTitle" class="text-xl md:text-2xl font-bold" style="color: var(--primary-color);"></h2>
<div style="width: 100px;"></div>
</div>
</div>
<!-- Products Grid -->
<div class="max-w-7xl mx-auto px-3 md:px-6 py-4 md:py-6">

<!-- Floating Mascot Image -->
<img src="mascot.png" alt="Floating Mascot" class="floating-mascot">

<div id="productsContainer" class="space-y-4 md:space-y-6"></div>
<!-- Empty State -->
<div id="emptyState" class="hidden text-center py-8 md:py-12 space-y-2">
<svg class="w-12 h-12 md:w-16 md:h-16 text-gray-300 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
</svg>
<p id="emptyStateMessage" class="text-gray-500 text-sm md:text-base font-medium">
Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ§Ø­Ø©
</p>
<p class="text-xs md:text-sm text-gray-400">
Ø¬Ø±Ù‘Ø¨ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ¦Ø© Ø£Ùˆ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ù…Ø© Ù…Ø®ØªÙ„ÙØ©.
</p>
</div>
</div>
</main>

<script>
let SUPABASE_URL = localStorage.getItem('supabaseUrl') || 'https://putgtsdgeyqyptamwpnx.supabase.co';
let SUPABASE_KEY = localStorage.getItem('supabaseKey') || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB1dGd0c2RnZXlxeXB0YW13cG54Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODMxMzAsImV4cCI6MjA4Mjk1OTEzMH0.bo30DP6UxtpHSvKTCwtaUmkJR8aT-BNEhyrW35IKsVE';
let PROJECT_REF = localStorage.getItem('projectRef') || 'putgtsdgeyqyptamwpnx';
let restaurantId = localStorage.getItem('restaurantId') || null;

if (PROJECT_REF) {
SUPABASE_URL = `https://${PROJECT_REF}.supabase.co`;
}

let allProducts = [];
let allCategories = [];
let settings = null;
let selectedCategoryId = 'all';

const categoryIcons = {
'Ù…Ø´Ø±ÙˆØ¨Ø§Øª': 'ğŸ¥¤',
'Ø£Ø·Ø¹Ù…Ø©': 'ğŸ½ï¸',
'Ø­Ù„ÙˆÙŠØ§Øª': 'ğŸ°',
'Ù…Ù‚Ø¨Ù„Ø§Øª': 'ğŸ¥—',
'Ø³Ø§Ù†Ø¯ÙˆØªØ´Ø§Øª': 'ğŸ¥ª',
'Ø¨ÙŠØªØ²Ø§': 'ğŸ•',
'Ø¨Ø±Ø¬Ø±': 'ğŸ”',
'Ø¯Ø¬Ø§Ø¬': 'ğŸ—',
'Ù„Ø­ÙˆÙ…': 'ğŸ¥©',
'Ø£Ø³Ù…Ø§Ùƒ': 'ğŸŸ',
'Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©': 'ğŸ',
'Ø³Ù„Ø·Ø§Øª': 'ğŸ¥—',
'Ø´ÙˆØ±Ø¨Ø§Øª': 'ğŸ²',
'Ø¹ØµØ§Ø¦Ø±': 'ğŸ§ƒ',
'Ù‚Ù‡ÙˆØ©': 'â˜•',
'Ø´Ø§ÙŠ': 'ğŸµ',
'Ø­Ù„ÙˆÙŠØ§Øª Ø´Ø±Ù‚ÙŠØ©': 'ğŸ§',
'Ù…Ø®Ø¨ÙˆØ²Ø§Øª': 'ğŸ',
'ÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©': 'ğŸŸ',
'default': 'ğŸ½ï¸'
};

function getCategoryIcon(categoryName) {
const name = categoryName?.toLowerCase() || '';
for (const [key, icon] of Object.entries(categoryIcons)) {
if (name.includes(key.toLowerCase())) {
return icon;
}
}
return categoryIcons.default;
}

function renderSocialLinks(settings) {
    const container = getEl('socialLinksContainer');
    if (!container || !settings) return;

const socialMap = {
  facebook_url: {
    icon: `<svg fill="currentColor" class="w-7 h-7" viewBox="0 0 24 24">
      <path d="M12 2.04C6.5 2.04 2 6.53 2 12.06c0 5.52 4.5 10.02 10 10.02s10-4.5 10-10.02C22 6.53 17.5 2.04 12 2.04zM16.5 12.62h-2.1v6.88h-2.8v-6.88H10v-2.5h1.6v-1.52c0-1.62 1-2.5 2.5-2.5h1.9v2.5h-1.2c-.6 0-.7.3-.7.72v1.3h2.1l-.3 2.5z"/>
    </svg>`,
    url: settings.facebook_url,
    color: 'text-blue-600'
  },
  instagram_url: {
    icon: `<svg fill="currentColor" class="w-7 h-7" viewBox="0 0 24 24">
      <path d="M12 2c2.7 0 3 .01 4.1.06 1.1.05 1.8.2 2.4.4.7.3 1.2.7 1.7 1.2.5.5 1 1.1 1.2 1.7.2.6.4 1.3.4 2.4.05 1.1.06 1.4.06 4.1s-.01 3-.06 4.1c-.05 1.1-.2 1.8-.4 2.4-.3.7-.7 1.2-1.2 1.7-.5.5-1.1 1-1.7 1.2-.6.2-1.3.4-2.4.4-1.1.05-1.4.06-4.1.06s-3-.01-4.1-.06c-1.1-.05-1.8-.2-2.4-.4-.7-.3-1.2-.7-1.7-1.2-.5-.5-1-1.1-1.2-1.7-.2-.6-.4-1.3-.4-2.4-.05-1.1-.06-1.4-.06-4.1s.01-3 .06-4.1c.05-1.1.2-1.8.4-2.4.3-.7.7-1.2 1.2-1.7.5-.5 1.1-1 1.7-1.2.6-.2 1.3-.4 2.4-.4C9 2.01 9.3 2 12 2zm0 4.4c-2.4 0-4.4 2-4.4 4.4s2 4.4 4.4 4.4 4.4-2 4.4-4.4-2-4.4-4.4-4.4zm0 7.2c-1.5 0-2.8-1.3-2.8-2.8s1.3-2.8 2.8-2.8 2.8 1.3 2.8 2.8-1.3 2.8-2.8 2.8zm5.8-7.3c-.6 0-1.1.5-1.1 1.1s.5 1.1 1.1 1.1 1.1-.5 1.1-1.1-.5-1.1-1.1-1.1z"/>
    </svg>`,
    url: settings.instagram_url,
    color: 'text-pink-500'
  },
  tiktok_url: {
    icon: `<svg fill="currentColor" class="w-7 h-7" viewBox="0 0 24 24">
      <path d="M12.53.02C13.84 0 15.14.01 16.44 0c.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.32-4.2-1.86-6.58.56-2.8 2.71-4.96 5.42-5.66 2.4-.62 4.6.32 5.97 2.25V.02z"/>
    </svg>`,
    url: settings.tiktok_url,
    color: 'text-black'
  },
  whatsapp_number: {
    icon: `<svg fill="currentColor" class="w-7 h-7" viewBox="0 0 24 24">
      <path d="M12.04 2.02c-5.52 0-10 4.48-10 10s4.48 10 10 10c.1 0 .2 0 .3-.02l3.89 1.17-1.2-3.8c.83-1.1 1.33-2.43 1.33-3.87 0-5.52-4.48-10-10-10zm4.2 12.1c-.2.5-.8.8-1.4.9-.5.1-1.1.1-1.6-.1-.6-.2-1.2-.5-1.8-.9-.6-.4-1.2-1-1.7-1.6-.5-.6-1-1.3-1.4-2s-.6-1.4-.6-2.2c0-1.1.4-2.1 1.1-2.8.7-.7 1.6-1.1 2.6-1.1h.1c.4 0 .8.1 1.1.3.4.2.6.5.8.9l.3.6c.1.3.1.6 0 .9l-.6 1.4c-.1.2-.3.4-.5.5-.2.1-.4.1-.6.1-.2 0-.4-.1-.6-.2l-.2-.1c-.2-.1-.4-.2-.7-.3-.5-.2-1-.1-1.4.2s-.8.6-1.1 1c-.3.4-.6.8-.7 1.3s-.1.9.1 1.4c.2.5.5.9.9 1.2.4.3.8.5 1.3.6.5.1 1 .1 1.5-.1.5-.2.9-.5 1.2-.9.3-.4.5-.8.6-1.2.1-.4.2-.8.4-1.2.2-.4.5-.7.9-.9.4-.2.8-.2 1.2 0l.1.1.1.1c.4.2.7.5.9.9.2.4.3.8.1 1.3l-.5 1.1z"/>
    </svg>`,
    url: `https://wa.me/${settings.whatsapp_number}`,
    color: 'text-green-500'
  }
};

    let html = '';
    for (const key in socialMap) {
        if (settings[key]) {
            const { icon, url, color } = socialMap[key];
            html += `
                <a href="${url}" target="_blank" rel="noopener noreferrer" class="${color} hover:opacity-75 transition-opacity">
                    ${icon}
                </a>
            `;
        }
    }
    container.innerHTML = html;
}

const getEl = (id) => document.getElementById(id);
const setText = (id, value) => {
const el = getEl(id);
if (el) {
el.textContent = value;
}
};

// URL validation function
function isValidUrl(string) {
try {
const url = new URL(string);
return url.protocol === 'http:' || url.protocol === 'https:';
} catch (_) {
return false;
}
}

// Check if URL is from social media platform (might need special handling)
function isSocialMediaUrl(url) {
if (!url) return false;
const lowerUrl = url.toLowerCase();
return lowerUrl.includes('facebook.com') || 
lowerUrl.includes('instagram.com') || 
lowerUrl.includes('tiktok.com') || 
lowerUrl.includes('youtube.com') ||
lowerUrl.includes('twitter.com') ||
lowerUrl.includes('x.com') ||
lowerUrl.includes('fb.me');  // Handle Facebook short links
}

// Extract Facebook post ID for better URL handling
function getFacebookPostUrl(url) {
if (!url) return url;
try {
// Handle different Facebook URL formats
if (url.includes('/posts/')) {
return url; // Already a post URL
} else if (url.includes('/permalink.php')) {
return url; // Already a permalink
} else if (url.match(/facebook\.com\/.*\/(\d+)/)) {
const postId = url.match(/facebook\.com\/.*\/(\d+)/)[1];
return `https://www.facebook.com/posts/${postId}`;
}
return url; // Return as-is if can't parse
} catch (e) {
return url;
}
}

// Handle media loading errors
function handleMediaError(element, type) {
console.warn(`Failed to load ${type}:`, element.src);
const parent = element.parentElement;
if (parent) {
if (type === 'video') {
parent.innerHTML = '<div class="w-full h-full flex items-center justify-center text-gray-500 bg-gray-100">âš ï¸ Failed to load video</div>';
} else if (type === 'image') {
parent.innerHTML = '<div class="w-full h-full flex items-center justify-center text-gray-500 bg-gray-100">âš ï¸ Failed to load image</div>';
}
}
}

function selectCategory(categoryId) {
selectedCategoryId = categoryId;
const category = categoryId === 'all'
? { name_ar: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª' }
: allCategories.find(cat => cat.id === categoryId);
document.getElementById('selectedCategoryTitle').textContent = category?.name_ar || 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª';
document.getElementById('menuHeader').style.display = 'none';
document.getElementById('productsView').classList.remove('hidden');
renderProducts();
window.scrollTo({ top: 0, behavior: 'smooth' });
}

function backToCategories() {
selectedCategoryId = 'all';
document.getElementById('menuHeader').style.display = 'block';
document.getElementById('productsView').classList.add('hidden');
window.scrollTo({ top: 0, behavior: 'smooth' });
}

async function fetchAPI(endpoint, options = {}) {
const method = (options.method || 'GET').toUpperCase();
let resourcePath = endpoint;
if (method === 'GET' && !/select=/i.test(endpoint)) {
const separator = endpoint.includes('?') ? '&' : '?';
resourcePath = `${endpoint}${separator}select=*`;
}
const url = `${SUPABASE_URL}/rest/v1/${resourcePath}`;
try {
const response = await fetch(url, {
method: 'GET',
...options,
headers: {
'apikey': SUPABASE_KEY,
'Authorization': `Bearer ${SUPABASE_KEY}`,
'Content-Type': 'application/json',
'Prefer': 'return=representation',
...options.headers
}
});
if (!response.ok) {
console.error(`API Error ${response.status}:`, response.statusText);
throw new Error(`HTTP ${response.status}: ${response.statusText}`);
}
const data = await response.json();
return Array.isArray(data) ? data : [data];
} catch (error) {
console.error('Fetch API Error:', error);
return [];
}
}

function renderCategories() {
const container = getEl('categoriesContainer');
let html = '';
allCategories.forEach((cat, index) => {
const categoryProducts = allProducts.filter(p => p.category_id === cat.id);
const productCount = categoryProducts.length;
const icon = getCategoryIcon(cat.name_ar);
const animationDelay = index * 80;
html += `
<div class="category-card" onclick="selectCategory('${cat.id}')" style="animation-delay: ${animationDelay}ms;">
<div class="category-image-wrapper">
${cat.image_url ?
`<img src="${cat.image_url}" alt="${cat.name_ar}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
<div class="category-icon" style="display: none;">${icon}</div>` :
`<div class="category-icon">${icon}</div>`
}
${productCount > 0 ? `<span class="category-badge">${productCount}</span>` : ''}
</div>
<div class="category-info">
<h3 class="category-name">${cat.name_ar}</h3>
</div>
</div>
`;
});
container.innerHTML = html;
}

function renderProducts() {
const container = document.getElementById('productsContainer');
const emptyState = document.getElementById('emptyState');
const filtered = allProducts.filter(product => {
if (selectedCategoryId === 'all') return true;
return product.category_id === selectedCategoryId;
});
if (filtered.length === 0) {
container.innerHTML = '';
emptyState.classList.remove('hidden');
return;
}
emptyState.classList.add('hidden');
const html = filtered.map((product, index) => renderProductCard(product, index)).join('');
container.innerHTML = html;
}

function renderProductCard(product, index) {
const animationDelay = index * 60;
const imageUrl = product.image_url || '';
return `
<article class="product-card" style="animation-delay: ${animationDelay}ms;">
<div class="product-image">
${imageUrl ? `
<img src="${imageUrl}" alt="${product.name_ar}" onerror="this.style.display='none'; this.nextElementSibling.classList.remove('hidden');">
<div class="fallback-thumb hidden">ğŸ½ï¸</div>
` : `
<div class="fallback-thumb">ğŸ½ï¸</div>
`}
${product.is_featured ? '<span class="badge-featured">â­ Ù…Ù…ÙŠØ²</span>' : ''}
</div>
<div class="product-content">
<div class="product-header">
<h3 class="product-name">${product.name_ar}</h3>
${product.name_en ? `<p class="product-name-en">${product.name_en}</p>` : ''}
</div>
${product.description_ar ? `<p class="product-description">${product.description_ar}</p>` : ''}
<div class="product-footer">
<span></span>
<div class="price-chip">
${product.price} <span style="font-size: 0.65rem; font-weight: 400;">${settings?.currency || 'Ø¬.Ù…'}</span>
</div>
</div>
</div>
</article>
`;
}

async function loadData() {
try {
const settingsData = await fetchAPI(`restaurant_settings?restaurant_id=eq.${restaurantId}`);
if (settingsData.length > 0) {
settings = settingsData[0];
const nameAr = settings.restaurant_name_ar || 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…';
const nameEn = settings.restaurant_name_en || '';
const primaryColor = settings.primary_color || '#D97706';
setText('restaurantName', nameAr);
const taglineEl = getEl('restaurantTagline');
if (taglineEl) {
if (nameEn.trim()) {
taglineEl.textContent = nameEn;
taglineEl.classList.remove('hidden');
} else {
taglineEl.classList.add('hidden');
}
}
const logoImg = getEl('restaurantLogo');
if (logoImg && settings.logo_url) {
logoImg.src = settings.logo_url;
logoImg.onerror = function() {
this.parentElement.classList.add('hidden');
    };
}

// Handle Ad Banner - Prioritize social media content
const adBannerContainer = getEl('adBannerContainer');
if (adBannerContainer) {
    console.log('Banner settings:', settings);
    console.log('Social ad video:', settings.social_ad_video);
    console.log('Social ad image:', settings.social_ad_image);
    console.log('Ad banner URLs:', settings.ad_banner_urls);
    
    const adBannerWrapper = getEl('adBannerWrapper');
    let slides = [];
    
    // Check for social media ad content first (prioritize video over image)
    if (settings.social_ad_video && isValidUrl(settings.social_ad_video)) {
        // Process URL for better Facebook handling
        const videoUrl = getFacebookPostUrl(settings.social_ad_video);
        // Handle video content - support multiple video formats
        slides.push(`
            <div class="swiper-slide">
                <div class="relative w-full h-full">
                    <a href="${videoUrl}" target="_blank" rel="noopener noreferrer" class="block w-full h-full">
                        <video class="w-full h-full object-cover" controls autoplay muted loop playsinline onerror="handleMediaError(this, 'video')">
                            <source src="${videoUrl}" type="video/mp4">
                            <source src="${videoUrl}" type="video/webm">
                            <source src="${videoUrl}" type="video/ogg">
                            Your browser does not support the video tag.
                        </video>
                    </a>
                </div>
            </div>
        `);
    } else if (settings.social_ad_image && isValidUrl(settings.social_ad_image)) {
        // Process URL for better Facebook handling
        const imageUrl = getFacebookPostUrl(settings.social_ad_image);
        // Handle image content (only if no video)
        slides.push(`
            <div class="swiper-slide">
                <a href="${imageUrl}" target="_blank" rel="noopener noreferrer" class="block w-full h-full">
                    <img src="${imageUrl}" alt="Social Media Advertisement" onerror="handleMediaError(this, 'image')">
                </a>
            </div>
        `);
    }
    
    // If no social media content, use uploaded banner images
    if (slides.length === 0 && settings.ad_banner_urls) {
        let bannerUrls = [];
        
        // Handle different formats
        if (typeof settings.ad_banner_urls === 'string') {
            try {
                // Try to parse as JSON array
                const parsed = JSON.parse(settings.ad_banner_urls);
                bannerUrls = Array.isArray(parsed) ? parsed : [settings.ad_banner_urls];
            } catch (e) {
                // If parsing fails, treat as single URL
                bannerUrls = [settings.ad_banner_urls];
            }
        } else if (Array.isArray(settings.ad_banner_urls)) {
            bannerUrls = settings.ad_banner_urls;
        }
        
        console.log('Processed banner URLs:', bannerUrls);
        
        if (bannerUrls.length > 0) {
            slides = bannerUrls.map(url => `
                <div class="swiper-slide">
                    <div class="w-full h-full p-2">
                        <img src="${url}" alt="Advertisement" class="w-full h-full object-cover rounded-lg shadow-2xl ring-4 ring-amber-400/50 hover:ring-amber-400/70 transition-all duration-300" onerror="console.error('Failed to load banner image:', this.src); this.style.display='none'; this.parentElement.innerHTML='<div class=\\'w-full h-full flex items-center justify-center text-gray-500 bg-gray-100 rounded-lg\\'>Failed to load image</div>';">
                    </div>
                </div>
            `);
        }
    }
    
    console.log('Total slides created:', slides.length);
    
    // Display the banner if we have slides
    if (slides.length > 0) {
        console.log('Displaying banner with slides:', slides);
        adBannerWrapper.innerHTML = slides.join('');
        adBannerContainer.style.display = 'block';

        // Only enable loop if we have more than 1 slide
        const swiperConfig = {
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        };
        
        // Add loop and autoplay only if we have multiple slides
        if (slides.length > 1) {
            swiperConfig.loop = true;
            swiperConfig.autoplay = {
                delay: 3000,
                disableOnInteraction: false,
            };
        }
        
        new Swiper('.ad-swiper', swiperConfig);
    }
}
document.documentElement.style.setProperty('--primary-color', primaryColor);

// Apply primary color to review FAB
const reviewFab = getEl('reviewFab');
if (reviewFab) {
    reviewFab.style.backgroundColor = primaryColor;
}

renderSocialLinks(settings);
}
const categoriesEndpoint = `categories?restaurant_id=eq.${restaurantId}&is_active=eq.true&order=display_order.asc`;
allCategories = await fetchAPI(categoriesEndpoint);
const productsEndpoint = `products?restaurant_id=eq.${restaurantId}&is_available=eq.true&order=display_order.asc`;
allProducts = await fetchAPI(productsEndpoint);
renderCategories();
renderProducts();
const loadingEl = getEl('loadingScreen');
if (loadingEl) {
    loadingEl.classList.add('hidden');
}
} catch (error) {
console.error('Error loading data:', error);
}
}

window.addEventListener('DOMContentLoaded', async () => {
const params = new URLSearchParams(window.location.search);
const urlRestaurantId = params.get('restaurant_id');
if (urlRestaurantId) {
restaurantId = urlRestaurantId;
localStorage.setItem('restaurantId', restaurantId);
}
if (!restaurantId) {
document.getElementById('loadingScreen').innerHTML = `
<div class="text-center text-white px-4">
<p class="text-xl font-semibold mb-2">Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù…</p>
<p class="text-sm opacity-90">Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Ø®Ù„Ø§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
</div>
`;
return;
}
await loadData();
});

// Review Modal Functions
function openReviewModal() {
    getEl('reviewModal').classList.remove('hidden');
    getEl('reviewModal').classList.add('flex');
    getEl('reviewFabContainer').classList.add('hidden');
}

function closeReviewModal() {
    getEl('reviewModal').classList.add('hidden');
    getEl('reviewModal').classList.remove('flex');
    getEl('reviewFabContainer').classList.remove('hidden');
}

// Reviews Display Modal Functions
function openReviewsDisplayModal() {
    loadAndRenderReviews();
    getEl('reviewsDisplayModal').classList.remove('hidden');
    getEl('reviewsDisplayModal').classList.add('flex');
}

function closeReviewsDisplayModal() {
    getEl('reviewsDisplayModal').classList.add('hidden');
    getEl('reviewsDisplayModal').classList.remove('flex');
}

async function loadAndRenderReviews() {
    const container = getEl('reviewsListContainer');
    container.innerHTML = '<p class="text-center text-gray-500">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª...</p>';

    try {
        const reviews = await fetchAPI(`reviews?restaurant_id=eq.${restaurantId}&is_approved=eq.true&order=created_at.desc`);
        
        if (reviews.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ø­Ø§Ù„ÙŠÙ‹Ø§.</p>';
            return;
        }

        container.innerHTML = reviews.map(r => `
            <div class="border rounded-lg p-4 bg-gray-50">
                <div class="flex items-start mb-2">
                    <div class="flex-1">
                        <h4 class="font-bold text-gray-800">${r.customer_name}</h4>
                        <p class="text-xs text-gray-400">${r.customer_governorate} - ${r.customer_city}</p>
                    </div>
                    <div class="text-sm text-yellow-500 font-bold flex items-center">
                        ${'â˜…'.repeat(Math.round((r.place_rating + r.products_rating + r.service_rating) / 3))}
                        <span class="text-gray-300">${'â˜…'.repeat(5 - Math.round((r.place_rating + r.products_rating + r.service_rating) / 3))}</span>
                    </div>
                </div>
                ${r.comment ? `<p class="text-gray-700 text-sm">${r.comment}</p>` : ''}
            </div>
        `).join('');

    } catch (error) {
        console.error('Failed to load reviews:', error);
        container.innerHTML = '<p class="text-center text-red-500">Ø¹Ø°Ø±Ù‹Ø§ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª.</p>';
    }
}

async function submitReview(event) {
    event.preventDefault();
    const btn = getEl('submitReviewBtn');
    btn.disabled = true;
    btn.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

    const reviewData = {
        restaurant_id: restaurantId,
        customer_name: getEl('customerName').value,
        customer_phone: getEl('customerPhone').value,
        customer_governorate: getEl('customerGovernorate').value,
        customer_city: getEl('customerCity').value,
        place_rating: document.querySelector('input[name="place_rating"]:checked').value,
        products_rating: document.querySelector('input[name="products_rating"]:checked').value,
        service_rating: document.querySelector('input[name="service_rating"]:checked').value,
        comment: getEl('reviewComment').value,
        is_approved: false
    };

    try {
        await fetchAPI('reviews', {
            method: 'POST',
            body: JSON.stringify(reviewData)
        });
        
        getEl('reviewForm').reset();
        closeReviewModal();
        alert('Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ! ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­.');

    } catch (error) {
        console.error('Failed to submit review:', error);
        alert('Ø¹Ø°Ø±Ù‹Ø§ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    } finally {
        btn.disabled = false;
        btn.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…';
    }
}
</script>
<!-- Review Modal -->
<div id="reviewModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-[100] p-4" onclick="closeReviewModal()">
    <div class="bg-white rounded-2xl p-6 md:p-8 max-w-lg w-full max-h-[90vh] overflow-y-auto review-modal-content" onclick="event.stopPropagation();">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-gray-800">â­ ÙƒÙŠÙ ÙƒØ§Ù†Øª ØªØ¬Ø±Ø¨ØªÙƒØŸ</h3>
            <button onclick="closeReviewModal()" class="text-gray-400 hover:text-gray-600 text-2xl font-bold">&times;</button>
        </div>
        <form id="reviewForm" onsubmit="submitReview(event)">
            <!-- Customer Info -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <input type="text" id="customerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]" required>
                <input type="tel" id="customerPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]" required>
                <input type="text" id="customerGovernorate" placeholder="Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]" required>
                <input type="text" id="customerCity" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]" required>
            </div>

            <!-- Ratings -->
            <div class="space-y-4 mb-4">
                <div class="flex justify-between items-center"><span class="font-medium">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙƒØ§Ù†</span><div class="star-rating flex flex-row-reverse" data-rating-group="place"> <input type="radio" id="place-5" name="place_rating" value="5"><label for="place-5">â˜…</label><input type="radio" id="place-4" name="place_rating" value="4"><label for="place-4">â˜…</label><input type="radio" id="place-3" name="place_rating" value="3"><label for="place-3">â˜…</label><input type="radio" id="place-2" name="place_rating" value="2"><label for="place-2">â˜…</label><input type="radio" id="place-1" name="place_rating" value="1" required><label for="place-1">â˜…</label></div></div>
                <div class="flex justify-between items-center"><span class="font-medium">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span><div class="star-rating flex flex-row-reverse" data-rating-group="products"> <input type="radio" id="products-5" name="products_rating" value="5"><label for="products-5">â˜…</label><input type="radio" id="products-4" name="products_rating" value="4"><label for="products-4">â˜…</label><input type="radio" id="products-3" name="products_rating" value="3"><label for="products-3">â˜…</label><input type="radio" id="products-2" name="products_rating" value="2"><label for="products-2">â˜…</label><input type="radio" id="products-1" name="products_rating" value="1" required><label for="products-1">â˜…</label></div></div>
                <div class="flex justify-between items-center"><span class="font-medium">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø©</span><div class="star-rating flex flex-row-reverse" data-rating-group="service"> <input type="radio" id="service-5" name="service_rating" value="5"><label for="service-5">â˜…</label><input type="radio" id="service-4" name="service_rating" value="4"><label for="service-4">â˜…</label><input type="radio" id="service-3" name="service_rating" value="3"><label for="service-3">â˜…</label><input type="radio" id="service-2" name="service_rating" value="2"><label for="service-2">â˜…</label><input type="radio" id="service-1" name="service_rating" value="1" required><label for="service-1">â˜…</label></div></div>
            </div>

            <!-- Comment -->
            <textarea id="reviewComment" placeholder="Ø£Ø®Ø¨Ø±Ù†Ø§ Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¹Ù† ØªØ¬Ø±Ø¨ØªÙƒ..." class="w-full px-4 py-2 border rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]" rows="3"></textarea>
            
            <button type="submit" id="submitReviewBtn" class="w-full bg-[var(--primary-color)] text-white py-3 rounded-lg font-bold hover:bg-opacity-90 transition-all">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>

            <div class="text-center mt-4">
                <a href="#" onclick="event.preventDefault(); openReviewsDisplayModal();" class="text-sm font-semibold text-gray-600 hover:text-[var(--primary-color)] transition-colors">â­ Ø¹Ø±Ø¶ Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
            </div>
        </form>
    </div>
</div>
<!-- Reviews Display Modal -->
<div id="reviewsDisplayModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-[100] p-4" onclick="closeReviewsDisplayModal()">
    <div class="bg-white rounded-2xl p-6 md:p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto review-modal-content" onclick="event.stopPropagation();">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-800">â­ Ø¢Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Ø¦Ù†Ø§</h3>
            <button onclick="closeReviewsDisplayModal()" class="text-gray-400 hover:text-gray-600 text-2xl font-bold">&times;</button>
        </div>
        <div id="reviewsListContainer" class="space-y-4">
            <!-- Approved reviews will be loaded here -->
        </div>
    </div>
</div>
</body>
</html>
